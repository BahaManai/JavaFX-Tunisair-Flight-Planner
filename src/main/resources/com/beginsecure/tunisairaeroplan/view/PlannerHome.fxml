<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.bootstrapfx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<?import org.kordamp.bootstrapfx.BootstrapFX?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.beginsecure.tunisairaeroplan.Controller.PlannerHomeController"
            stylesheets="@main.css"
            styleClass="bg-light">

    <!-- Inclusion du thème Bootstrap -->
    <stylesheets>
        <BootstrapFX fx:factory="bootstrapFXStylesheet"/>
    </stylesheets>

    <!-- Barre latérale simplifiée pour non-admins -->
    <left>
        <VBox fx:id="sidebar" prefWidth="250.0" spacing="0" styleClass="bg-primary-dark min-vh-100">
            <!-- En-tête avec logo -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="bg-primary p-3">
                <FontIcon iconLiteral="fas-plane-departure" iconSize="18" styleClass="text-light"/>
                <Label text="Tunisair Aéroplan" styleClass="h5 text-light"/>
            </HBox>
            <AnchorPane prefHeight="120">
                <HBox alignment="CENTER" prefWidth="250" AnchorPane.topAnchor="10.0">
                    <ImageView fitWidth="160" fitHeight="100" preserveRatio="true" pickOnBounds="true">
                        <image>
                            <Image url="@../images/logo.png" />
                        </image>
                    </ImageView>
                </HBox>
            </AnchorPane>
            <!-- Menu restreint -->
            <ScrollPane fitToWidth="true" styleClass="bg-primary border-0">
                <VBox spacing="6" styleClass="bg-primary p-3">
                    <Button text="Calendrier des Vols" onAction="#showCalendrier"
                            styleClass="btn btn-outline-light text-start w-100 mb-2">
                        <graphic>
                            <FontIcon iconLiteral="fas-calendar" styleClass="me-2"/>
                        </graphic>
                    </Button>

                    <Button text="Planification des Vols" onAction="#showPlanificationVols"
                            styleClass="btn btn-outline-light text-start w-100 mb-2">
                        <graphic>
                            <FontIcon iconLiteral="fas-calendar-alt" styleClass="me-2"/>
                        </graphic>
                    </Button>

                    <!-- Logout Button -->
                    <Button text="Déconnexion" onAction="#handleLogout"
                            styleClass="btn btn-outline-light text-start w-100 mb-2">
                        <graphic>
                            <FontIcon iconLiteral="fas-sign-out-alt" styleClass="me-2"/>
                        </graphic>
                    </Button>

                    <Separator styleClass="my-3"/>

                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="p-3 bg-primary-dark rounded">
                        <FontIcon iconLiteral="fas-user-circle" iconSize="24" styleClass="text-light"/>
                        <VBox spacing="2">
                            <Label fx:id="userRoleLabel" text="Planificateur" styleClass="text-light small fw-bold"/>
                            <Label fx:id="userEmailLabel" text="user@tunisair.com" styleClass="text-light-50 x-small"/>
                        </VBox>
                    </HBox>
                </VBox>
            </ScrollPane>
        </VBox>
    </left>

    <center>
        <StackPane fx:id="contentPane" styleClass="p-4">
        </StackPane>
    </center>

    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="10" styleClass="bg-dark p-2">
            <Label text="© 2023 Tunisair Aéroplan" styleClass="text-light small"/>
            <Label fx:id="statusLabel" text="Connecté" styleClass="text-success small ms-3"/>
        </HBox>
    </bottom>
</BorderPane>